!function(){"use strict";function e(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const n=72e-12,r=1.465e-9/3;var o=class{constructor(e){this.options=e,this.KWH_PER_BYTE_FOR_NETWORK=r}perByte(e,t){if(e<1)return 0;if(t){return e*n*0+e*r*475}return 5.603333333333333e-10*e*519}};var i=1e9;var a={data:{AFG:132.53,AFRICA:559.42,ALB:24.29,DZA:634.61,ASM:611.11,AGO:174.73,ATG:611.11,ARG:394.62,ARM:264.54,ABW:561.22,ASEAN:554.5,ASIA:591.19,AUS:570.35,AUT:110.81,AZE:671.39,BHS:660.1,BHR:904.62,BGD:678.11,BRB:605.51,BLR:441.74,BEL:138.11,BLZ:225.81,BEN:584.07,BTN:23.33,BOL:489.14,BIH:600,BWA:847.91,BRA:105.51,BRN:893.91,BGR:335.33,BFA:467.53,BDI:250,CPV:558.14,KHM:417.71,CMR:305.42,CAN:161.43,CYM:642.86,CAF:0,TCD:628.57,CHL:353.52,CHN:585.82,COL:214.88,COM:642.86,COG:700,COD:24.46,COK:250,CRI:26.46,CIV:393.89,HRV:204.96,CUB:637.61,CYP:534.32,CZE:449.72,DNK:151.65,DJI:692.31,DMA:529.41,DOM:580.78,ECU:150.69,EGY:570.13,SLV:116.54,GNQ:591.84,ERI:631.58,EST:416.67,SWZ:172.41,ETH:24.64,EU:243.83,EUROPE:327.69,FLK:500,FRO:404.76,FJI:288.46,FIN:79.16,FRA:56.04,GUF:217.82,PYF:442.86,G20:482.92,G7:361.52,GAB:491.6,GMB:666.67,GEO:167.02,DEU:380.95,GHA:484,GRC:336.57,GRL:178.57,GRD:640,GLP:500,GUM:622.86,GTM:328.27,GIN:236.84,GNB:625,GUY:640.35,HTI:567.31,HND:282.27,HKG:699.5,HUN:204.19,ISL:27.68,IND:705.13,IDN:675.93,IRN:665.15,IRQ:688.81,IRL:290.81,ISR:582.93,ITA:330.72,JAM:555.56,JPN:512.81,JOR:540.92,KAZ:830.41,KEN:83.33,KIR:666.67,XKX:894.65,KWT:649.2,KGZ:147.29,LAO:265.51,"LATIN AMERICA AND CARIBBEAN":260.28,LVA:123.2,LBN:599.01,LSO:20,LBR:227.85,LBY:818.69,LTU:160.07,LUX:105.26,MAC:448.98,MDG:436.44,MWI:66.67,MYS:605.83,MDV:611.77,MLI:408,MLT:459.14,MTQ:523.18,MRT:464.71,MUS:632.48,MEX:475.36,"MIDDLE EAST":660.46,MDA:648.5,MNG:771.8,MNE:417.07,MSR:1e3,MAR:662.64,MOZ:135.65,MMR:483.57,NAM:59.26,NRU:750,NPL:24.44,NLD:267.62,NCL:660.58,NZL:110.89,NIC:265.12,NER:670.89,NGA:516.23,"NORTH AMERICA":356.01,PRK:389.59,MKD:565.35,NOR:30.08,OCEANIA:507.63,OECD:360.53,OMN:564.69,PAK:463.66,PSE:516.13,PAN:161.68,PNG:507.25,PRY:24.31,PER:251.74,POL:661.93,PRT:165.55,PRI:678.74,QAT:602.59,REU:572.82,ROU:240.58,RUS:436.28,RWA:316.33,KNA:636.36,LCA:666.67,SPM:600,VCT:529.41,WSM:473.68,STP:642.86,SAU:706.79,SEN:511.6,SRB:636.06,SYC:564.52,SLE:50,SGP:474,SVK:116.77,SVN:231.28,SLB:700,SOM:578.95,ZAF:729.67,KOR:441.65,SSD:629.03,ESP:174.05,LKA:509.78,SDN:263.16,SUR:349.28,SWE:40.7,CHE:34.84,SYR:701.66,TWN:639.53,TJK:116.86,TZA:339.25,THA:560.74,PHL:601.1,TGO:443.18,TON:625,TTO:681.53,TUN:564.62,TUR:464.59,TKM:1306.03,TCA:653.85,UGA:44.53,UKR:259.69,ARE:561.14,GBR:237.59,USA:385.98,URY:112.65,UZB:1167.6,VUT:571.43,VEN:185.8,VNM:409.8,VGB:647.06,VIR:632.35,WORLD:485.99,YEM:566.1,ZMB:111.97,ZWE:297.87},type:"average"};const s=a.data.WORLD,l=.75,u=.25,d=.02,c=e=>parseFloat(e.toFixed(2));function g(e){var t,n,r,o,i,c;if("object"!=typeof e)throw new Error("Options must be an object");const g={};if(null==e?void 0:e.gridIntensity){g.gridIntensity={};const{device:l,dataCenter:u,network:d}=e.gridIntensity;(l||0===l)&&("object"==typeof l?(a.data[null==(t=l.country)?void 0:t.toUpperCase()]||(console.warn(`"${l.country}" is not a valid country. Please use a valid 3 digit ISO 3166 country code. \nSee https://developers.thegreenwebfoundation.org/co2js/data/ for more information. \nFalling back to global average grid intensity.`),g.gridIntensity.device={value:s}),g.gridIntensity.device={country:l.country,value:parseFloat(a.data[null==(n=l.country)?void 0:n.toUpperCase()])}):"number"==typeof l?g.gridIntensity.device={value:l}:(g.gridIntensity.device={value:s},console.warn(`The device grid intensity must be a number or an object. You passed in a ${typeof l}. \nFalling back to global average grid intensity.`))),(u||0===u)&&("object"==typeof u?(a.data[null==(r=u.country)?void 0:r.toUpperCase()]||(console.warn(`"${u.country}" is not a valid country. Please use a valid 3 digit ISO 3166 country code. \nSee https://developers.thegreenwebfoundation.org/co2js/data/ for more information.  \nFalling back to global average grid intensity.`),g.gridIntensity.dataCenter={value:s}),g.gridIntensity.dataCenter={country:u.country,value:parseFloat(a.data[null==(o=u.country)?void 0:o.toUpperCase()])}):"number"==typeof u?g.gridIntensity.dataCenter={value:u}:(g.gridIntensity.dataCenter={value:s},console.warn(`The data center grid intensity must be a number or an object. You passed in a ${typeof u}. \nFalling back to global average grid intensity.`))),(d||0===d)&&("object"==typeof d?(a.data[null==(i=d.country)?void 0:i.toUpperCase()]||(console.warn(`"${d.country}" is not a valid country. Please use a valid 3 digit ISO 3166 country code. \nSee https://developers.thegreenwebfoundation.org/co2js/data/ for more information.  Falling back to global average grid intensity. \nFalling back to global average grid intensity.`),g.gridIntensity.network={value:s}),g.gridIntensity.network={country:d.country,value:parseFloat(a.data[null==(c=d.country)?void 0:c.toUpperCase()])}):"number"==typeof d?g.gridIntensity.network={value:d}:(g.gridIntensity.network={value:s},console.warn(`The network grid intensity must be a number or an object. You passed in a ${typeof d}. \nFalling back to global average grid intensity.`)))}return((null==e?void 0:e.dataReloadRatio)||0===e.dataReloadRatio)&&("number"==typeof e.dataReloadRatio?e.dataReloadRatio>=0&&e.dataReloadRatio<=1?g.dataReloadRatio=e.dataReloadRatio:(g.dataReloadRatio=d,console.warn(`The dataReloadRatio option must be a number between 0 and 1. You passed in ${e.dataReloadRatio}. \nFalling back to default value.`)):(g.dataReloadRatio=d,console.warn(`The dataReloadRatio option must be a number. You passed in a ${typeof e.dataReloadRatio}. \nFalling back to default value.`))),((null==e?void 0:e.firstVisitPercentage)||0===e.firstVisitPercentage)&&("number"==typeof e.firstVisitPercentage?e.firstVisitPercentage>=0&&e.firstVisitPercentage<=1?g.firstVisitPercentage=e.firstVisitPercentage:(g.firstVisitPercentage=l,console.warn(`The firstVisitPercentage option must be a number between 0 and 1. You passed in ${e.firstVisitPercentage}. \nFalling back to default value.`)):(g.firstVisitPercentage=l,console.warn(`The firstVisitPercentage option must be a number. You passed in a ${typeof e.firstVisitPercentage}. \nFalling back to default value.`))),((null==e?void 0:e.returnVisitPercentage)||0===e.returnVisitPercentage)&&("number"==typeof e.returnVisitPercentage?e.returnVisitPercentage>=0&&e.returnVisitPercentage<=1?g.returnVisitPercentage=e.returnVisitPercentage:(g.returnVisitPercentage=u,console.warn(`The returnVisitPercentage option must be a number between 0 and 1. You passed in ${e.returnVisitPercentage}. \nFalling back to default value.`)):(g.returnVisitPercentage=u,console.warn(`The returnVisitPercentage option must be a number. You passed in a ${typeof e.returnVisitPercentage}. \nFalling back to default value.`))),g}function f(e=""){return{"User-Agent":`co2js/0.15.0 ${e}`}}var y=Object.defineProperty,v=Object.defineProperties,p=Object.getOwnPropertyDescriptors,b=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,R=(e,t,n)=>t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,w=(e,t)=>{for(var n in t||(t={}))h.call(t,n)&&R(e,n,t[n]);if(b)for(var n of b(t))m.call(t,n)&&R(e,n,t[n]);return e},O=(e,t)=>v(e,p(t));var P=class{constructor(e){this.options=e}energyPerByteByComponent(e){const t=.81*(e/i);return{consumerDeviceEnergy:.52*t,networkEnergy:.14*t,productionEnergy:.19*t,dataCenterEnergy:.15*t}}co2byComponent(e,t=s,n={}){let r=s,o=s,i=s,a=s;if(null==n?void 0:n.gridIntensity){const{device:e,network:t,dataCenter:a}=n.gridIntensity;((null==e?void 0:e.value)||0===(null==e?void 0:e.value))&&(r=e.value),((null==t?void 0:t.value)||0===(null==t?void 0:t.value))&&(o=t.value),((null==a?void 0:a.value)||0===(null==a?void 0:a.value))&&(i=a.value)}!0===t&&(i=50);const l={};for(const[t,n]of Object.entries(e))t.startsWith("dataCenterEnergy")?l[t.replace("Energy","CO2")]=n*i:t.startsWith("consumerDeviceEnergy")?l[t.replace("Energy","CO2")]=n*r:t.startsWith("networkEnergy")?l[t.replace("Energy","CO2")]=n*o:l[t.replace("Energy","CO2")]=n*a;return l}perByte(e,t=!1,n=!1,r={}){e<1&&(e=0);const o=this.energyPerByteByComponent(e,r);if("boolean"!=typeof t)throw new Error(`perByte expects a boolean for the carbon intensity value. Received: ${t}`);const i=this.co2byComponent(o,t,r),a=Object.values(i).reduce(((e,t)=>e+t));return n?O(w({},i),{total:a}):a}perVisit(e,t=!1,n=!1,r={}){const o=this.energyPerVisitByComponent(e,r);if("boolean"!=typeof t)throw new Error(`perVisit expects a boolean for the carbon intensity value. Received: ${t}`);const i=this.co2byComponent(o,t,r),a=Object.values(i).reduce(((e,t)=>e+t));return n?O(w({},i),{total:a}):a}energyPerByte(e){const t=this.energyPerByteByComponent(e);return Object.values(t).reduce(((e,t)=>e+t))}energyPerVisitByComponent(e,t={},n=.75,r=.25,o=.02){(t.dataReloadRatio||0===t.dataReloadRatio)&&(o=t.dataReloadRatio),(t.firstVisitPercentage||0===t.firstVisitPercentage)&&(n=t.firstVisitPercentage),(t.returnVisitPercentage||0===t.returnVisitPercentage)&&(r=t.returnVisitPercentage);const i=this.energyPerByteByComponent(e),a={};Object.values(i);for(const[e,t]of Object.entries(i))a[`${e} - first`]=t*n,a[`${e} - subsequent`]=t*r*o;return a}energyPerVisit(e){let t=0,n=0;const r=Object.entries(this.energyPerVisitByComponent(e));for(const[e,n]of r)e.indexOf("first")>0&&(t+=n);for(const[e,t]of r)e.indexOf("subsequent")>0&&(n+=t);return t+n}emissionsPerVisitInGrams(e,t=s){return c(e*t)}annualEnergyInKwh(e,t=1e3){return e*t*12}annualEmissionsInGrams(e,t=1e3){return e*t*12}annualSegmentEnergy(e){return{consumerDeviceEnergy:c(.52*e),networkEnergy:c(.14*e),dataCenterEnergy:c(.15*e),productionEnergy:c(.19*e)}}};var C,A,E=class{constructor(e){if(this.model=new P,"1byte"===(null==e?void 0:e.model))this.model=new o;else if("swd"===(null==e?void 0:e.model))this.model=new P;else if(null==e?void 0:e.model)throw new Error(`"${e.model}" is not a valid model. Please use "1byte" for the OneByte model, and "swd" for the Sustainable Web Design model.\nSee https://developers.thegreenwebfoundation.org/co2js/models/ to learn more about the models available in CO2.js.`);this._segment="segment"===(null==e?void 0:e.results)}perByte(e,t=!1){return this.model.perByte(e,t,this._segment)}perVisit(e,t=!1){var n;if(null==(n=this.model)?void 0:n.perVisit)return this.model.perVisit(e,t,this._segment);throw new Error("The perVisit() method is not supported in the model you are using. Try using perByte() instead.\nSee https://developers.thegreenwebfoundation.org/co2js/methods/ to learn more about the methods available in CO2.js.")}perByteTrace(e,t=!1,n={}){var r,o,i,a,l,u,d,c,f;let y={};return n&&(y=g(n)),{co2:this.model.perByte(e,t,this._segment,y),green:t,variables:{description:"Below are the variables used to calculate this CO2 estimate.",bytes:e,gridIntensity:{description:"The grid intensity (grams per kilowatt-hour) used to calculate this CO2 estimate.",network:null!=(i=null==(o=null==(r=null==y?void 0:y.gridIntensity)?void 0:r.network)?void 0:o.value)?i:s,dataCenter:t?50:null!=(u=null==(l=null==(a=null==y?void 0:y.gridIntensity)?void 0:a.dataCenter)?void 0:l.value)?u:s,production:s,device:null!=(f=null==(c=null==(d=null==y?void 0:y.gridIntensity)?void 0:d.device)?void 0:c.value)?f:s}}}}perVisitTrace(e,t=!1,n={}){var r,o,i,a,l,u,d,c,f,y,v,p,b;if(null==(r=this.model)?void 0:r.perVisit){let r={};return n&&(r=g(n)),{co2:this.model.perVisit(e,t,this._segment,r),green:t,variables:{description:"Below are the variables used to calculate this CO2 estimate.",bytes:e,gridIntensity:{description:"The grid intensity (grams per kilowatt-hour) used to calculate this CO2 estimate.",network:null!=(a=null==(i=null==(o=null==r?void 0:r.gridIntensity)?void 0:o.network)?void 0:i.value)?a:s,dataCenter:t?50:null!=(d=null==(u=null==(l=null==r?void 0:r.gridIntensity)?void 0:l.dataCenter)?void 0:u.value)?d:s,production:s,device:null!=(y=null==(f=null==(c=null==r?void 0:r.gridIntensity)?void 0:c.device)?void 0:f.value)?y:s},dataReloadRatio:null!=(v=null==r?void 0:r.dataReloadRatio)?v:.02,firstVisitPercentage:null!=(p=null==r?void 0:r.firstVisitPercentage)?p:.75,returnVisitPercentage:null!=(b=null==r?void 0:r.returnVisitPercentage)?b:.25}}}throw new Error("The perVisitDetailed() method is not supported in the model you are using. Try using perByte() instead.\nSee https://developers.thegreenwebfoundation.org/co2js/methods/ to learn more about the methods available in CO2.js.")}},I=Object.getOwnPropertyNames,V=(C={"src/hosting-json.js"(e,t){function n(e,t){return t.indexOf(e)>-1?e:{url:e,green:!1}}t.exports={check:async function(e,t){return"string"==typeof e?function(e,t){return t.indexOf(e)>-1}(e,t):function(e,t){let n=[];for(let r of e)t.indexOf(r)>-1&&n.push(r);return n}(e,t)},greenDomainsFromResults:function(e){return Object.entries(e).filter((([e,t])=>t.green)).map((([e,t])=>t.url))},find:function(e,t){return"string"==typeof e?n(e,t):function(e,t){const r={};for(let o of e)r[o]=n(o,t);return r}(e,t)}}}},function(){return A||(0,C[I(C)[0]])((A={exports:{}}).exports,A),A.exports})();var B={check:function(e,t){const n="string"==typeof t?{userAgentIdentifier:t}:t;if((null==n?void 0:n.db)&&n.verbose)throw new Error("verbose mode cannot be used with a local lookup database");return"string"==typeof e?async function(e,t={}){const n=await fetch(`https://api.thegreenwebfoundation.org/greencheck/${e}`,{headers:f(t.userAgentIdentifier)});if(null==t?void 0:t.db)return V.check(e,t.db);const r=await n.json();return t.verbose?r:r.green}(e,n):async function(e,t={}){try{const n="https://api.thegreenwebfoundation.org/v2/greencheckmulti",r=JSON.stringify(e),o=await fetch(`${n}/${r}`,{headers:f(t.userAgentIdentifier)}),i=await o.json();return t.verbose?i:function(e){const t=Object.entries(e);return t.filter((([e,t])=>t.green)).map((([e,t])=>t.url))}(i)}catch(e){return t.verbose?{}:[]}}(e,n)}};var S={check:function(e,t){return B.check(e,t)}};window.addEventListener("load",(function(){var t=window.location.hostname;S.check(t,{verbose:!1}).then((function(t){var n=t,r=new E({model:"swd"}),o={gridIntensity:{dataCenter:a.data.BEL}},i=0,s=[],l=performance.getEntries();(l=l.filter((function(e){return"transferSize"in e}))).forEach((function(e){i=parseInt(i+e.transferSize),s.push({name:e.name,transferSize:e.transferSize})})),s.sort((function(e,t){return t.transferSize-e.transferSize}));var u=r.perVisitTrace(i,n,o).co2.toFixed(3),d={"A+":.095,A:.186,B:.341,C:.493,D:.656,E:.846,F:1/0},c=Object.entries(d).map((function(t){var n=e(t,2);return{grade:n[0],threshold:n[1]}})).sort((function(e,t){return e.threshold-t.threshold})),g="".concat(s.length," requests emitted an estimated ").concat(u," grams of CO2 for a carbon rating of ").concat(function(e){return c.find((function(t){t.grade;var n=t.threshold;return e<=n})).grade}(u),". ").concat(i," bytes were transferred.");console.log(g)}))}))}();
//# sourceMappingURL=co2.js.map
